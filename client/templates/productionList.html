<!-- <button ng-click="productionListCtrl.deleteTags()">delete tags</button> -->

<div ng-show="productionListCtrl.ready">
  <div ng-if="productionListCtrl.hoverCreate" class="onboard-box onboard-create"><p>Creates a production for each day in your date range</p></div>
  <div class="productions-view col-sm-12 section">
    <div class="header-row">
      <div class="col-sm-3 class="no-margin""><h4>Productions</h4></div>
      <div class="col-sm-9" ng-show="productionListCtrl.currentUser.role === 'producer'">
        <button ng-mouseover="productionListCtrl.hoverCreate = true" ng-mouseleave="productionListCtrl.hoverCreate = false" ng-click="productionListCtrl.openCreateProdModal()" type="submit" class="create-new-prod btn default-btn">+ Create New</button>
      </div>
    </div>

<!-- GROUPED TAGS-->
    <div class="col-md-12 no-padding">
      <div id="accordionLocation" ng-if="productionListCtrl.userTaggables" ng-repeat="tag in userTaggables">
        <button class="accordion" ng-click="productionListCtrl.wholeAccordionClick($event)">
          <p id="{{tag._id}}" class="accordion-p" ng-click="accordionTextClick()"><img class="accordion-img" src="./img/accordionArrow.png" ng-click="productionListCtrl.arrowAccordionClick($event)"/> {{ tag.label }}</p>

            <!-- <p>{{tag.minDate | date:'shortDate' || 'mm/dd/yyyy'}} - {{tag.maxDate | date:'shortDate' || 'mm/dd/yyyy'}}</p>

            <p>{{tag.taggables.length}} Production Days</p> -->
          <div ng-if="productionListCtrl.compareDate(production.date)" class="line-item accordion-panel droppable" ng-repeat="production in tag.taggables | orderBy: 'date'">
            <div class="col-md-2 start-date">
              <p class="no-margin">{{production.date | date:'shortDate' || 'mm/dd/yyyy'}}</p>
            </div>
            <div class="col-md-2">
              <p class="no-margin">{{ production.name || "Name Not Found" }}</p>
            </div>
            <div class="col-md-2 end-date">
              <p class="no-margin">{{ production.productionDay ? "Day " + production.productionDay : ''}}</p>
            </div>
            <div class="col-md-3 nowrap">
              <p class="no-margin">{{ production.location[0] || 'No Location'}}</p>
            </div>
            <div class="col-md-3 text-right no-padding">
              <p class="no-margin">
                <a ng-href="/#/production/{{production._id}}" class="btn main-btn">View</a>
                <a ng-show="production.by_ === productionListCtrl.currentUser._id" ng-click="productionListCtrl.openDeleteProductionModal(production.name, production._id, $index)"><i class="fa fa-times"></i></a>
              </p>
            </div>
          </div>
        </button>
      </div>
    </div>

<!-- SINGLE DAY PRODUCTIONS -->
    <div class="line-item draggable droppable" ng-repeat="production in productionListCtrl.currentUser.allProductions track by $index | orderBy: 'date' " ng-if="production.active && productionListCtrl.compareDate(production.date) && !productionListCtrl.checkIfTagged(production)" my-repeat-directive>
        <!-- make each production draggable and droppable -->
        <!-- when dropped, make a new group with a dropdown -->
      <div id="{{production._id}}">
        <div class="col-md-2 start-date">
          <p class="no-margin">{{production.date | date:'shortDate' || 'mm/dd/yyyy'}}</p>
        </div>
        <div class="col-md-2">
          <p class="no-margin">{{ production.name || "Name Not Found" }}</p>
        </div>
        <div class="col-md-2 end-date">
          <p class="no-margin">{{ production.productionDay ? "Day " + production.productionDay : ''}}</p>
        </div>
        <div class="col-md-3 nowrap">
          <p class="no-margin">{{ production.location[0] || 'No Location'}}</p>
        </div>
        <div class="col-md-3 text-right no-padding">
          <p class="no-margin">
            <a ng-href="/#/production/{{production._id}}" class="btn main-btn">View</a>
            <a ng-show="production.by_ === productionListCtrl.currentUser._id" ng-click="productionListCtrl.openDeleteProductionModal(production.name, production._id, $index)"><i class="fa fa-times"></i></a>
          </p>
        </div>
      </div>
    </div>

  </div>
</div>
    <!-- TODO This is dummy content to adjust styling while I'm not logged in. Will remove later -->
    <div class="list-group-item" ng-hide="main.currentUser.username">
      <div class="row">
        <div class="col-xs-2 start-date">
          <p>mm/dd/yyyy</p>
        </div>
        <div class="col-xs-2 end-date">
          <p>mm/dd/yyyy</p>
        </div>
        <div class="col-xs-2">
          <p>{{ production.name || "Name Not Found" }}</p>
        </div>
        <div class="col-xs-3">
          <p>Location</p>
        </div>
        <div class="col-xs-3 text-right">
          <p><a ng-href="/#/production/{{production._id}}" class="btn main-btn">View</a></p>
        </div>
      </div>
    </div>

  <div class="past-productions-view col-sm-12 section">
    <div class="">
      <div class="col-md-12"><h4>Past Productions</h4></div>
    </div>
    <div ng-if="production.active && !productionListCtrl.compareDate(production.date)" class="line-item" ng-repeat="production in productionListCtrl.currentUser.allProductions">
      <div class="">
        <div class="col-md-2 start-date">
          <p class="no-margin">{{production.date | date:'shortDate' || 'mm/dd/yyyy'}}</p>
        </div>
        <div class="col-md-2 end-date">
          <p class="no-margin">{{ production.name || "Name Not Found" }}</p>
        </div>
        <div class="col-md-2">
          <p class="no-margin">{{ 'Day ' + production.productionDay}}</p>
        </div>
        <div class="col-md-3">
          <p class="no-margin">{{ production.location[0] || 'No Location'}}</p>
        </div>
        <div class="col-md-3 text-right no-padding">
          <p class="no-margin">
            <a ng-href="/#/production/{{production._id}}" class="btn main-btn">View</a>
            <!-- <a ng-show="productionListCtrl.currentUser.role === 'producer'" ng-click="productionListCtrl.deleteProduction(production.name, production._id, $index)"><i class="fa fa-times"></i></a> -->
            <a ng-show="production.by_ === productionListCtrl.currentUser._id" ng-click="productionListCtrl.openDeleteProductionModal(production.name, production._id, $index)"><i class="fa fa-times"></i></a>
          </p>
        </div>
      </div>
    </div>
  </div>

<div id="modal-root" ng-if="productionListCtrl.notifModal.show">
  <div id="modal-container" ng-click="productionListCtrl.closeNotifModal()">
    <div id="modal-sm" class="section">
      <div class="padding20 text-center">
        <h1><i ng-if="productionListCtrl.notifModal.isSuccess" class="fa fa-check-circle-o"></i></h1>
        <h1><i ng-if="productionListCtrl.notifModal.isFailure" class="fa fa-times-circle-o"></i></h1>
        <p>{{ productionListCtrl.notifModal.content }}</p>
        <p><a class="btn approval-btn">Close</a></p>
      </div>
    </div>
  </div>
</div>

<div id="modal-root" ng-if="productionListCtrl.upgradeModal.show">
  <div id="modal-container" ng-click="productionListCtrl.closeUpgradeModal()">
    <div id="modal-lg" class="section">
      <div class="padding20 text-center">
        <h1><i ng-if="productionListCtrl.upgradeModal.isSuccess" class="fa fa-check-circle-o"></i></h1>
        <h1><i ng-if="productionListCtrl.upgradeModal.isFailure" class="fa fa-times-circle-o"></i></h1>
        <p>{{ productionListCtrl.upgradeModal.content }}</p>
        <br>
        <img class="upgrade-options" src="./img/upgradeProPre.png">
        <p><a class="free-btn approval-btn btn nohover">Current Plan</a><a href="https://app.myproducer.io/#/subscribe/premium" class="premium-btn btn main-btn">Premium</a><a href="https://app.myproducer.io/#/subscribe/pro" class="pro-btn btn">Pro</a></p>
      </div>
    </div>
  </div>
</div>

<div id="modal-root" ng-if="productionListCtrl.showDeleteProductionModal">
  <div id="modal-container" ng-click="productionListCtrl.closeDeleteProductionModal()">
    <div id="modal-md" class="section">
      <div class="padding20 text-center">
        <h1><i class="fa fa-times-circle"></i></h1>
        <p>Are you sure you want to delete {{ productionListCtrl.productionName }}?</p>
        <br>
        <p><a class="btn approval-btn" ng-click="productionListCtrl.deleteProduction(productionListCtrl.productionName, productionListCtrl.productionID, productionListCtrl.$index)">Yes</a> <a class="btn error-btn" ng-click="productionListCtrl.closeDeleteProductionModal()">Cancel</a></p>
      </div>
    </div>
  </div>
</div>

<div id="modal-root" ng-if="productionListCtrl.showCreateProdModal">
  <div id="modal-container">
    <div id="modal-md" class="section">
      <div class="padding20 text-center">
        <form class="text-right" ng-submit="productionListCtrl.addProduction()">
          <h4 style="float: left;">Production Name</h4>
        <input id="prod-name-input" class="bg-transparent subtle-border padding5 top-margin2 form-control" ng-model="productionListCtrl.newProduction.name" type="text" required>
        <br>
        <input class="bg-transparent subtle-border padding5 top-margin2" id="prod-date-from" type="date" ng-model="productionListCtrl.dateFrom" ng-change="productionListCtrl.updateMinDateTo()" min="{{ productionListCtrl.minDateFrom }}" required>
        <h5 class="prod-date-from">Start</h5>
        <input ng-init="productionListCtrl.updateMinDateTo()" class="bg-transparent subtle-border padding5 top-margin2" id="prod-date-to" type="date" ng-model="productionListCtrl.dateTo" required>
        <h5 class="prod-date-to">End</h5>
      <div class="align-center">
        <button ng-click="productionListCtrl.closeCreateProdModal()" class="btn btn-danger">Cancel</button>
        <button type="submit" class=" btn main-btn">Create</button>
      </div>
    </form>
      </div>
    </div>
  </div>
</div>

<div id="directive-modal" class="directive-modal">
  <div id="modal-container">
    <div id="modal-md" class="section">
      <div class="padding20 text-center">
        <input id="directive-modal-input" type="text" placeholder="Production Name" style="color: black">
        <button id="directive-modal-button" class="btn main-btn">Create</button>
        <br>
      </div>
    </div>
  </div>
</div>
